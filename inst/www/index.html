<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Example map</title>
  
   <!-- Include order: first jquery, then opencpu.js, and then your code -->
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="//cdn.opencpu.org/opencpu-0.4.js"></script>
    <script>
      $(document).ready(function(){
      $("#valeursubmit").on("click", function(){
        //disable the button to prevent multiple clicks
        $("#valeursubmit").attr("disabled", "disabled");
        
        //read the value for 'myname'
        var valeur = $("#value").val();
        
        //perform the request
        ocpu.seturl("../R");
        var req = ocpu.rpc("pica-R-test", {
          x : valeur
        }, function(output){
          $("#output").text(output.result);
        });
        
        //if R returns an error, alert the error message
        req.fail(function(){
          alert("Server error: " + req.responseText);
        });
        
        //after request complete, re-enable the button 
        req.always(function(){
          $("#valeursubmit").removeAttr("disabled")
        });
      });
    });
    </script>

  </head>

  <body>
    <form>
      <div class="form-group">
        <label>Valeur</label>
        <input type="number" class="form-control" id="value" value="0">
      </div>        
      <button type="submit" id="valeursubmit" class="btn btn-default">Soumettre</button>
   </form>
  <p id="output"></p>
</body>

</html>
